# AeroSpace - i3-like tiling window manager for macOS
# https://nikitabobko.github.io/AeroSpace/guide
# Config location: ~/.aerospace.toml

start-at-login = true

# Flatten single-child containers; alternate orientation for nested containers
enable-normalization-flatten-containers = true
enable-normalization-opposite-orientation-for-nested-containers = true

# Default root container orientation (used when a new workspace is created)
default-root-container-layout = 'tiles'
default-root-container-orientation = 'horizontal'

# ──────────────────────────────────────────────────────────────────────────────
# Gaps (pixels)
# ──────────────────────────────────────────────────────────────────────────────
[gaps]
inner.horizontal = 2
inner.vertical   = 2
outer.left       = 0
outer.bottom     = 0
outer.top        = 0
outer.right      = 0

# ──────────────────────────────────────────────────────────────────────────────
# Main mode bindings  (modifier = alt / Option key)
# ──────────────────────────────────────────────────────────────────────────────
[mode.main.binding]

# Focus — vim-style navigation
alt-h = 'focus left'
alt-j = 'focus down'
alt-k = 'focus up'
alt-l = 'focus right'

# Move windows
alt-ctrl-h = 'move left'
alt-ctrl-j = 'move down'
alt-ctrl-k = 'move up'
alt-ctrl-l = 'move right'

# Layout toggles
alt-slash   = 'layout tiles horizontal vertical'      # toggle split direction
alt-comma   = 'layout accordion horizontal vertical'  # accordion (stack) mode
alt-shift-f = 'layout floating tiling'                # toggle float

# macOS native fullscreen
alt-f = 'fullscreen'

# Back-and-forth between last two workspaces
alt-tab = 'workspace-back-and-forth'

# Focus next monitor
alt-shift-tab = 'focus-monitor --wrap-around next'

# Move current workspace to next monitor
alt-ctrl-shift-tab = 'move-workspace-to-monitor --wrap-around next'

# Workspace switching (1–9)
alt-y = 'workspace 1'
alt-u = 'workspace 2'
alt-i = 'workspace 3'
alt-o = 'workspace 4'
alt-p = 'workspace 5'

# Move window to workspace (y/u/i/o/p = 1–5, numbers for 6–9)
alt-ctrl-y = 'move-node-to-workspace 1'
alt-ctrl-u = 'move-node-to-workspace 2'
alt-ctrl-i = 'move-node-to-workspace 3'
alt-ctrl-o = 'move-node-to-workspace 4'
alt-ctrl-p = 'move-node-to-workspace 5'

# Enter resize mode
alt-r = 'mode resize'

# App workspaces — Meh+key launches app and switches to its dedicated workspace
shift-ctrl-alt-f = ['workspace 1', 'exec-and-forget open -a Ghostty']
shift-ctrl-alt-d = ['workspace 2', 'exec-and-forget open -a "Google Chrome"']
shift-ctrl-alt-s = ['workspace 3', 'exec-and-forget open -a Obsidian']
shift-ctrl-alt-a = ['workspace 4', 'exec-and-forget open -a Music']

# Sesh — tmux session switching (Meh = shift+ctrl+alt)
shift-ctrl-alt-e = 'exec-and-forget /Users/snesjhon/Developer/dotfiles/scripts/tmux-session.sh leetcode /Users/snesjhon/Developer/snesjhon/ysk/leetcode'
shift-ctrl-alt-w = 'exec-and-forget /Users/snesjhon/Developer/dotfiles/scripts/tmux-session.sh dotfiles /Users/snesjhon/Developer/dotfiles'
shift-ctrl-alt-r = 'exec-and-forget /Users/snesjhon/Developer/dotfiles/scripts/tmux-session.sh snesjhon /Users/snesjhon/Developer/snesjhon'

# Reload config
alt-shift-semicolon = 'reload-config'

# Enter service mode (destructive ops)
alt-shift-slash= 'mode service'

# ──────────────────────────────────────────────────────────────────────────────
# Resize mode  (enter with alt-r, exit with enter/esc)
# ──────────────────────────────────────────────────────────────────────────────
[mode.resize.binding]
h = 'resize width -50'
j = 'resize height +50'
k = 'resize height -50'
l = 'resize width +50'

enter = 'mode main'
esc   = 'mode main'

# ──────────────────────────────────────────────────────────────────────────────
# Service mode  (enter with alt-shift-\, dangerous ops)
# ──────────────────────────────────────────────────────────────────────────────
[mode.service.binding]
esc       = ['reload-config', 'mode main']
r         = ['flatten-workspace-tree', 'mode main']  # reset layout
f         = ['layout floating tiling', 'mode main']
backspace = ['close-all-windows-but-current', 'mode main']

# ──────────────────────────────────────────────────────────────────────────────
# Workspace auto-assignment
# Apps land in their designated workspace when opened.
# Remove any entry if you prefer ad-hoc placement.
# ──────────────────────────────────────────────────────────────────────────────
[[on-window-detected]]
if.app-id = 'com.mitchellh.ghostty'
run = 'move-node-to-workspace 1'

[[on-window-detected]]
if.app-id = 'com.google.Chrome'
run = 'move-node-to-workspace 2'

[[on-window-detected]]
if.app-id = 'md.obsidian'
run = 'move-node-to-workspace 3'

[[on-window-detected]]
if.app-id = 'com.apple.Music'
run = 'move-node-to-workspace 4'

# ──────────────────────────────────────────────────────────────────────────────
# App rules — always float these
# ──────────────────────────────────────────────────────────────────────────────
[[on-window-detected]]
if.app-id = 'com.apple.systempreferences'
run = 'layout floating'

[[on-window-detected]]
if.app-id = 'com.apple.finder'
run = 'layout floating'

[[on-window-detected]]
if.app-id = 'com.apple.calculator'
run = 'layout floating'

[[on-window-detected]]
if.app-id = 'com.apple.ActivityMonitor'
run = 'layout floating'
